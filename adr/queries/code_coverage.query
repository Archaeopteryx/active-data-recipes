{
	"from":"coverage",
	"select":[
		{"value":"source.file.name","aggregate":"cardinality"},
		{"value":"source.file.total_uncovered","aggregate":"sum"},
		{"value":"source.file.total_covered","aggregate":"sum"}
	],
	"where":{"and":[
		{"prefix":{"source.file.name":"%(path)s"}},
		{"prefix":{"repo.changeset.id":"%(rev)s"}}
	]},
	"groupby":[{
		"name":"file",
		"value":{"left":[
			"source.file.name",
			{"add":[
				1,
				{
					"find":{"source.file.name":"/"},
					"start":{"length":{"literal":"%(path)s"}},
					"default":{"length":"source.file.name"}
				}
			]}
		]}
	}],
    "format":"table",
	"limit":1000
}
